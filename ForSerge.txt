This code works well for 1D arrays. But trying it on 2D makes the compilation fail.

